<h1>{{product.title}}</h1>

{{#if product.thumbnails}}
  <img src="{{product.thumbnails}}" alt="{{product.title}}" style="width: 200px; height: auto;"/>
{{/if}}

<p><strong>Precio:</strong> ${{product.price}}</p>
<p><strong>Descripción:</strong> {{product.description}}</p>
<p><strong>Categoría:</strong> {{product.category}}</p>
<p><strong>Código:</strong> {{product.code}}</p>
<p><strong>Stock:</strong> {{product.stock}}</p>

<script>
  document.getElementById('addToCartBtn').addEventListener('click', async () => {
    const productId = document.getElementById('addToCartBtn').getAttribute('data-id');
    
 /*local storage*/
    const cartId = localStorage.getItem('cartId');
    
    if (!cartId) {
      alert('Debes tener un carrito activo para agregar productos.');
      return;
    }

    try {
      const res = await fetch(`/api/carts/${cartId}/products/${productId}`, {
        method: 'POST',
      });
      const data = await res.json();

      if (data.status === 'success') {
        alert(' Producto agregado al carrito');
      } else {
        alert(' Error: ' + data.message);
      }
    } catch (error) {
      alert('Error al agregar producto al carrito');
    }
  });
</script>

