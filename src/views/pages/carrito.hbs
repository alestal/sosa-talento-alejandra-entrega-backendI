<h1>Carrito</h1>

{{#if cart.products.length}}
  <ul>
    {{#each cart.products}}
      <li style="margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px;">
        <h3>{{this.product.title}}</h3>
        <p>Precio unitario: ${{this.product.price}}</p>
        <p>Cantidad: {{this.quantity}}</p>
        <p>Total: ${{multiply this.product.price this.quantity}}</p>

        
        <form action="/api/carts/{{../cart._id}}/products/{{this.product._id}}" method="POST" style="display:inline;">
          <input type="hidden" name="_method" value="PUT">
          <label for="quantity-{{this.product._id}}">Cantidad:</label>
          <input type="number" name="quantity" id="quantity-{{this.product._id}}" value="{{this.quantity}}" min="1" style="width: 60px;" />
          <button type="submit">Actualizar Carrito</button>
        </form>

        <form action="/api/carts/{{../cart.__id}}/products/{{this.product._id}}" method="POST" style="display:inline; margin-left: 10px;">
          <input type="hidden" name="_method" value="DELETE">
          <button type="submit">Eliminar</button>
        </form>
      </li>
    {{/each}}
  </ul>

  
  <form action="/api/carts/{{cart._id}}" method="POST" style="margin-top: 20px;">
    <input type="hidden" name="_method" value="DELETE">
    <button type="submit">Vaciar carrito</button>
  </form>
{{else}}
  <p>No hay productos en el carrito.</p>
{{/if}}
